// Generated by CoffeeScript 1.9.0
var BankAlert;

BankAlert = require('../models/bankalert');

module.exports.loadAlert = function(req, res, next, alertID) {
  return BankAlert.find(alertID, (function(_this) {
    return function(err, alert) {
      if ((err != null) || (alert == null)) {
        return res.send(404, {
          error: "Bank Alert not found"
        });
      } else {
        req.alert = alert;
        return next();
      }
    };
  })(this));
};

module.exports.index = function(req, res) {
  return BankAlert.all(function(err, alerts) {
    if (err != null) {
      return res.send(500, {
        error: 'Server error occurred while retrieving data'
      });
    } else {
      return res.send(200, alerts);
    }
  });
};

module.exports.create = function(req, res) {
  return BankAlert.create(req.body, function(err, alert) {
    if (err != null) {
      return res.send(500, {
        error: "Server error while creating bank alert."
      });
    } else {
      return res.send(201, alert);
    }
  });
};

module.exports.destroy = function(req, res) {
  return req.alert.destroy(function(err) {
    if (err != null) {
      return res.send(500, {
        error: "Server error while deleting the bank alert"
      });
    } else {
      return res.send(204, {
        success: true
      });
    }
  });
};

module.exports.update = function(req, res) {
  return req.alert.updateAttributes(req.body, function(err, alert) {
    if (err != null) {
      return res.send(500, {
        error: "Server error while saving bank alert"
      });
    } else {
      return res.send(200, alert);
    }
  });
};

module.exports.getForBankAccount = function(req, res) {
  return BankAlert.allFromBankAccount({
    id: req.params.accountID
  }, function(err, alerts) {
    if (err != null) {
      return res.send(500, {
        error: "Server error while getting bank alerts"
      });
    } else {
      return res.send(200, alerts);
    }
  });
};

module.exports.show = function(req, res) {
  return res.send(200, req.alert);
};
